<div class="bg">
  <h1 class="login-title">Đăng ký / K-music</h1>
  <nz-card class="login-box">
    <form [formGroup]="frm" (ngSubmit)="onSubmit()" autocomplete="off">
      <div class="mb-3">
        <label class="form-label" for="userName">Username</label>
        <input
          id="userName"
          nz-input
          placeholder="Nhập UserName"
          type="text"
          formControlName="userName"
        />
        <span
          class="text-danger"
          *ngIf="frm.get('userName')?.errors && frm.get('userName')?.touched"
        >
          Vui lòng nhập UserName
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label" for="fullName">Fullname</label>
        <input
          id="fullName"
          nz-input
          placeholder="Nhập FullName"
          type="text"
          formControlName="fullName"
        />
        <span
          class="text-danger"
          *ngIf="frm.get('fullName')?.errors && frm.get('fullName')?.touched"
        >
          Vui lòng nhập FullName
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label" for="email">Email</label>
        <input
          id="email"
          nz-input
          placeholder="Nhập Email"
          type="text"
          formControlName="email"
        />
        <span
          *ngIf="frm.get('email')?.errors && frm.get('email')?.touched"
          class="text-danger"
        >
          Vui lòng nhập Email
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label" for="password">Mật khẩu</label>
        <nz-input-group [nzSuffix]="suffixTemplate">
          <input
            id="password"
            [type]="passwordVisible ? 'text' : 'password'"
            nz-input
            placeholder="Nhập mật khẩu"
            formControlName="password"
          />
        </nz-input-group>
        <ng-template #suffixTemplate>
          <span
            nz-icon
            class="ant-input-password-icon"
            [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
            (click)="passwordVisible = !passwordVisible"
          ></span>
        </ng-template>
        <span
          class="text-danger"
          *ngIf="frm.get('password')?.errors && frm.get('password')?.touched"
        >
          Vui lòng nhập password
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label" for="confirmPassword"
          >Xác nhận mật khẩu</label
        >
        <nz-input-group [nzSuffix]="suffixTemplate">
          <input
            id="confirmPassword"
            [type]="passwordVisible ? 'text' : 'password'"
            nz-input
            placeholder="Nhập mật khẩu"
            formControlName="confirmPassword"
          />
        </nz-input-group>
        <ng-template #suffixTemplate>
          <span
            nz-icon
            class="ant-input-password-icon"
            [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
            (click)="passwordVisible = !passwordVisible"
          ></span>
        </ng-template>
        <span
          class="text-danger"
          *ngIf="
            frm.get('confirmPassword')?.hasError('isMatching') &&
            (frm.get('confirmPassword')?.dirty ||
              frm.get('confirmPassword')?.touched)
          "
        >
          Mật khẩu không khớp
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label" for="gender">Giới tính</label>
        <nz-select formControlName="gender" id="gender">
          <nz-option
            *ngFor="let gender of genderList"
            [nzValue]="gender.value"
            [nzLabel]="gender.dislay"
          >
          </nz-option>
        </nz-select>
        <span
          class="text-danger"
          *ngIf="frm.get('gender')?.errors && frm.get('gender')?.touched"
        >
          Vui lòng chọn giới tính
        </span>
      </div>

      <div
        *ngIf="validationErrors && validationErrors.length > 0"
        class="mx-auto mb-3 bg-danger text-white rounded"
      >
        <ul class="list-unstyled p-3">
          <li
            *ngFor="let error of validationErrors; let i = index"
            class="mb-2"
          >
            {{ error }}
          </li>
        </ul>
      </div>

      <div class="d-flex gap-3 w-100 justify-content-center align-items-center">
        <button nz-button nzType="default" nzvalue="large" routerLink="/login">
          Đăng nhập
        </button>
        <button
          [disabled]="frm.invalid"
          nz-button
          nzType="primary"
          nzvalue="large"
        >
          Đăng ký
        </button>
      </div>
    </form>
  </nz-card>
</div>
